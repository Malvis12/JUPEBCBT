<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover, maximum-scale=5.0"
    />
    <meta name="apple-mobile-web-app-capable" content="true" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="theme-color" content="#16a085" />
    <title>JUPEB Government CBT - Complete Enhanced</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #16a085 0%, #117a65 100%);
        color: #333;
        min-height: 100vh;
        padding: 10px;
        padding-left: max(10px, env(safe-area-inset-left));
        padding-right: max(10px, env(safe-area-inset-right));
        padding-top: max(10px, env(safe-area-inset-top));
        padding-bottom: max(10px, env(safe-area-inset-bottom));
      }

      body.dark-mode {
        background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
      }

      .container {
        width: 100%;
        max-width: 1200px;
        background: white;
        margin: 0 auto;
        border-radius: 10px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        overflow: hidden;
      }

      body.dark-mode .container {
        background: #1e1e1e;
        color: #e0e0e0;
      }

      .header {
        background: linear-gradient(135deg, #16a085 0%, #1abc9c 100%);
        color: white;
        padding: 20px 25px;
        text-align: center;
        border-bottom: 4px solid #117a65;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .header h1 {
        font-size: 20px;
        font-weight: 600;
      }

      .header-tools {
        display: flex;
        gap: 15px;
      }

      .tool-btn {
        background: rgba(255, 255, 255, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.3);
        color: white;
        padding: 8px 12px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 12px;
        transition: all 0.3s;
        min-height: 44px;
        display: flex;
        align-items: center;
        justify-content: center;
        -webkit-tap-highlight-color: transparent;
      }

      .tool-btn:hover {
        background: rgba(255, 255, 255, 0.3);
      }

      .menu-toggle {
        display: none;
        background: none;
        border: none;
        color: white;
        font-size: 20px;
        cursor: pointer;
        padding: 5px;
        margin-left: auto;
        -webkit-tap-highlight-color: transparent;
      }

      .top-bar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 12px 20px;
        background: #f5f5f5;
        border-bottom: 1px solid #ddd;
        gap: 10px;
        flex-wrap: wrap;
      }

      body.dark-mode .top-bar {
        background: #2a2a2a;
        border-bottom-color: #444;
      }

      .timer-display {
        font-size: 22px;
        font-weight: bold;
        color: #16a085;
        font-family: "Courier New", monospace;
        min-width: 100px;
      }

      .timer-display.warning {
        color: #ff6b6b;
        animation: blink 1s infinite;
      }

      @keyframes blink {
        0%,
        50% {
          opacity: 1;
        }
        51%,
        100% {
          opacity: 0.5;
        }
      }

      .stats-bar {
        display: flex;
        gap: 20px;
        font-size: 13px;
        align-items: center;
      }

      .stat-item {
        display: flex;
        align-items: center;
        gap: 8px;
        background: white;
        padding: 5px 12px;
        border-radius: 4px;
      }

      body.dark-mode .stat-item {
        background: #333;
      }

      .stat-label {
        font-weight: 600;
        color: #666;
      }

      .stat-value {
        font-weight: bold;
        color: #16a085;
      }

      .auto-save-indicator {
        font-size: 11px;
        color: #16a085;
        padding: 4px 8px;
        background: #e0f2f1;
        border-radius: 3px;
        display: none;
      }

      .content-area {
        padding: 30px;
        min-height: 500px;
      }

      .question-view,
      .results-view {
        display: none;
      }

      .question-view.active,
      .results-view.active {
        display: block;
      }

      .question-section {
        animation: fadeIn 0.3s ease;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .question-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
      }

      .question-number {
        color: #16a085;
        font-weight: bold;
        font-size: 18px;
      }

      .flag-btn {
        background: none;
        border: 2px solid #ffc107;
        color: #ffc107;
        padding: 8px 12px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 14px;
        font-weight: 600;
        transition: all 0.3s;
        min-height: 44px;
        -webkit-tap-highlight-color: transparent;
      }

      .flag-btn.flagged {
        background: #ffc107;
        color: white;
      }

      .question-course {
        display: inline-block;
        background: #e0f2f1;
        color: #16a085;
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 600;
        margin-bottom: 10px;
      }

      .question-text {
        font-size: 17px;
        color: #1a1a1a;
        margin-bottom: 20px;
        line-height: 1.7;
        font-weight: 500;
      }

      body.dark-mode .question-text {
        color: #e0e0e0;
      }

      .options {
        display: flex;
        flex-direction: column;
        gap: 12px;
        margin-bottom: 15px;
      }

      .option {
        padding: 12px 15px;
        border: 2px solid #ddd;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.3s ease;
        background: white;
        font-size: 15px;
        display: flex;
        align-items: center;
        min-height: 44px;
        -webkit-tap-highlight-color: transparent;
        -webkit-user-select: none;
        user-select: none;
      }

      body.dark-mode .option {
        background: #2a2a2a;
        border-color: #444;
        color: #e0e0e0;
      }

      .option:hover {
        border-color: #16a085;
        background: #e0f2f1;
      }

      .option input[type="radio"] {
        margin-right: 12px;
        cursor: pointer;
      }

      .option.selected {
        border-color: #16a085;
        background: #e0f2f1;
        font-weight: 600;
      }

      .option.correct {
        border-color: #27ae60;
        background: #d5f4e6;
      }

      .option.incorrect {
        border-color: #e74c3c;
        background: #fadbd8;
      }

      textarea {
        width: 100%;
        height: 150px;
        padding: 12px;
        border: 2px solid #ddd;
        border-radius: 6px;
        font-family: Arial, sans-serif;
        font-size: 14px;
        resize: vertical;
        background: white;
        color: #333;
        -webkit-appearance: none;
        appearance: none;
      }

      textarea:focus {
        outline: none;
        border-color: #16a085;
        box-shadow: 0 0 0 2px rgba(22, 160, 133, 0.1);
      }

      body.dark-mode textarea {
        background: #2a2a2a;
        border-color: #444;
        color: #e0e0e0;
      }

      .bottom-controls {
        display: flex;
        justify-content: space-between;
        gap: 12px;
        padding-top: 15px;
        flex-wrap: wrap;
      }

      .btn {
        padding: 10px 20px;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: 13px;
        font-weight: 600;
        transition: all 0.3s ease;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        min-height: 44px;
        display: flex;
        align-items: center;
        justify-content: center;
        -webkit-tap-highlight-color: transparent;
        -webkit-user-select: none;
        user-select: none;
      }

      .btn-primary {
        background: linear-gradient(135deg, #16a085 0%, #1abc9c 100%);
        color: white;
      }

      .btn-primary:hover:not(:disabled) {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(22, 160, 133, 0.3);
      }

      .btn-secondary {
        background: #f0f0f0;
        color: #333;
      }

      body.dark-mode .btn-secondary {
        background: #333;
        color: #e0e0e0;
      }

      .btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .btn:focus,
      .tool-btn:focus,
      .option:focus {
        outline: 2px solid #16a085;
        outline-offset: 2px;
      }

      @media (max-width: 767px) {
        .btn:focus,
        .tool-btn:focus,
        .option:focus {
          outline: none;
        }
      }

      .results-header {
        background: #e0f2f1;
        border-left: 5px solid #16a085;
        padding: 20px;
        margin-bottom: 30px;
        border-radius: 6px;
      }

      body.dark-mode .results-header {
        background: rgba(22, 160, 133, 0.2);
      }

      .results-header h2 {
        color: #16a085;
        margin-bottom: 10px;
      }

      .results-summary {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 15px;
        margin-bottom: 30px;
      }

      .summary-card {
        background: white;
        border: 1px solid #ddd;
        padding: 20px;
        border-radius: 6px;
        text-align: center;
      }

      body.dark-mode .summary-card {
        background: #2a2a2a;
        border-color: #444;
      }

      .summary-label {
        font-size: 12px;
        color: #666;
        font-weight: 600;
        margin-bottom: 8px;
      }

      .summary-value {
        font-size: 28px;
        font-weight: bold;
        color: #16a085;
      }

      .summary-card.correct .summary-value {
        color: #27ae60;
      }

      .summary-card.incorrect .summary-value {
        color: #e74c3c;
      }

      .answer-review {
        margin-bottom: 30px;
      }

      .section-title {
        background: #16a085;
        color: white;
        padding: 15px 20px;
        border-radius: 6px;
        margin-bottom: 15px;
        font-size: 16px;
        font-weight: 600;
      }

      .question-review {
        background: #f9f9f9;
        border: 1px solid #ddd;
        border-radius: 6px;
        padding: 20px;
        margin-bottom: 15px;
      }

      body.dark-mode .question-review {
        background: #2a2a2a;
        border-color: #444;
      }

      .review-question-header {
        display: flex;
        justify-content: space-between;
        align-items: start;
        margin-bottom: 15px;
      }

      .review-q-number {
        font-weight: bold;
        color: #16a085;
        font-size: 14px;
      }

      .review-q-course {
        display: inline-block;
        background: #e0f2f1;
        color: #16a085;
        padding: 3px 10px;
        border-radius: 15px;
        font-size: 11px;
        font-weight: 600;
      }

      .review-status {
        display: inline-block;
        padding: 5px 12px;
        border-radius: 4px;
        font-size: 12px;
        font-weight: 600;
      }

      .review-status.correct {
        background: #d5f4e6;
        color: #27ae60;
      }

      .review-status.incorrect {
        background: #fadbd8;
        color: #e74c3c;
      }

      .review-status.unanswered {
        background: #fff3cd;
        color: #856404;
      }

      .review-q-text {
        color: #1a1a1a;
        margin-bottom: 15px;
        line-height: 1.6;
      }

      body.dark-mode .review-q-text {
        color: #e0e0e0;
      }

      .answer-display {
        background: white;
        padding: 15px;
        border-radius: 4px;
        margin-bottom: 10px;
      }

      body.dark-mode .answer-display {
        background: #333;
      }

      .answer-row {
        display: flex;
        justify-content: space-between;
        margin-bottom: 10px;
        font-size: 14px;
      }

      .answer-row:last-child {
        margin-bottom: 0;
      }

      .answer-label {
        font-weight: 600;
        color: #666;
        min-width: 150px;
      }

      body.dark-mode .answer-label {
        color: #aaa;
      }

      .answer-value {
        color: #16a085;
        font-weight: 600;
      }

      .feedback {
        padding: 10px;
        border-radius: 4px;
        font-size: 13px;
        margin-top: 10px;
      }

      .feedback.correct {
        background: #d5f4e6;
        color: #27ae60;
        border-left: 3px solid #27ae60;
      }

      .feedback.incorrect {
        background: #fadbd8;
        color: #e74c3c;
        border-left: 3px solid #e74c3c;
      }

      .feedback.unanswered {
        background: #fff3cd;
        color: #856404;
        border-left: 3px solid #ffc107;
      }

      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 1000;
        justify-content: center;
        align-items: center;
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
      }

      .modal.active {
        display: flex;
      }

      .modal-content {
        background: white;
        padding: 30px;
        border-radius: 10px;
        max-width: 600px;
        width: 90%;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        margin: auto;
        -webkit-appearance: none;
        appearance: none;
        -webkit-tap-highlight-color: transparent;
      }

      body.dark-mode .modal-content {
        background: #1e1e1e;
        color: #e0e0e0;
      }

      .modal-content h2 {
        color: #16a085;
        margin-bottom: 20px;
      }

      .calculator {
        background: #f9f9f9;
        padding: 15px;
        border-radius: 6px;
        margin-bottom: 15px;
      }

      .calc-display {
        background: white;
        padding: 12px;
        border-radius: 4px;
        text-align: right;
        font-size: 20px;
        margin-bottom: 10px;
        font-family: "Courier New", monospace;
        min-height: 40px;
      }

      .calc-buttons {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 8px;
      }

      .calc-btn {
        padding: 10px;
        border: 1px solid #ddd;
        background: white;
        border-radius: 4px;
        cursor: pointer;
        font-weight: 600;
        min-height: 44px;
      }

      .calc-btn.operator {
        background: #16a085;
        color: white;
      }

      @media print {
        body {
          background: white;
        }
        .header-tools,
        .tool-btn,
        .bottom-controls,
        .timer-section {
          display: none !important;
        }
        .content-area {
          padding: 0;
        }
      }

      /* ==================== MOBILE OPTIMIZATION ==================== */

      @media (max-width: 1199px) {
        .container {
          border-radius: 0;
          box-shadow: none;
        }
        .header {
          padding: 15px 20px;
        }
        .header h1 {
          font-size: 18px;
        }
        .timer-display {
          font-size: 18px;
        }
      }

      @media (max-width: 1023px) {
        body {
          padding: 5px;
        }
        .header {
          flex-direction: column;
          align-items: flex-start;
          gap: 12px;
          padding: 12px 15px;
        }
        .header h1 {
          font-size: 16px;
        }
        .header-tools {
          width: 100%;
          gap: 10px;
        }
        .tool-btn {
          flex: 1;
          padding: 10px 12px;
          font-size: 11px;
        }
        .top-bar {
          flex-direction: column;
          align-items: flex-start;
          padding: 10px 15px;
          gap: 8px;
        }
        .stats-bar {
          width: 100%;
          flex-wrap: wrap;
          gap: 10px;
        }
        .stat-item {
          flex: 1;
          min-width: 120px;
          padding: 6px 10px;
          font-size: 12px;
        }
        .timer-display {
          font-size: 18px;
        }
        .content-area {
          padding: 15px;
          min-height: 400px;
        }
        .question-text {
          font-size: 15px;
        }
        .option {
          padding: 10px 12px;
          font-size: 14px;
        }
        .btn {
          padding: 10px 16px;
          font-size: 12px;
        }
        textarea {
          height: 120px;
          font-size: 13px;
        }
        .results-summary {
          grid-template-columns: repeat(2, 1fr);
          gap: 12px;
        }
        .summary-card {
          padding: 15px;
        }
        .summary-label {
          font-size: 11px;
        }
        .summary-value {
          font-size: 24px;
        }
        .modal-content {
          max-width: 90%;
          padding: 20px;
        }
        .question-number {
          font-size: 16px;
        }
      }

      @media (max-width: 767px) {
        body {
          font-size: 14px;
          padding: 0;
        }
        .container {
          border-radius: 0;
          max-width: 100%;
          box-shadow: none;
          margin: 0;
        }
        .header {
          padding: 10px 12px;
          gap: 10px;
          border-bottom: 3px solid #117a65;
        }
        .header h1 {
          font-size: 14px;
          margin: 0;
        }
        .header-tools {
          width: 100%;
          gap: 8px;
        }
        .menu-toggle {
          display: none;
        }
        .top-bar {
          flex-direction: row;
          padding: 8px 12px;
          gap: 6px;
          flex-wrap: wrap;
          align-items: stretch;
        }
        .top-bar > div:first-child {
          display: flex;
          gap: 8px;
          align-items: center;
        }
        .stats-bar {
          gap: 6px;
          font-size: 11px;
          width: 100%;
        }
        .stat-item {
          flex: 1;
          min-width: 80px;
          padding: 4px 8px;
          font-size: 10px;
          justify-content: center;
          flex-direction: column;
          align-items: center;
        }
        .timer-display {
          font-size: 16px;
          min-width: 70px;
        }
        .content-area {
          padding: 12px;
          min-height: auto;
        }
        .question-header {
          flex-direction: column;
          gap: 8px;
          align-items: flex-start;
        }
        .question-number {
          font-size: 14px;
        }
        .flag-btn {
          width: 100%;
          padding: 8px;
          font-size: 12px;
        }
        .question-text {
          font-size: 14px;
          margin-bottom: 15px;
        }
        .options {
          gap: 10px;
        }
        .option {
          padding: 10px 12px;
          font-size: 13px;
          min-height: 44px;
        }
        .option input[type="radio"] {
          margin-right: 10px;
          width: 18px;
          height: 18px;
        }
        textarea {
          height: 100px;
          font-size: 12px;
          padding: 10px;
        }
        .bottom-controls {
          gap: 8px;
          margin-top: 12px;
        }
        .btn {
          flex: 1;
          min-width: 100px;
          padding: 10px 12px;
          font-size: 11px;
          min-height: 40px;
        }
        .results-header {
          padding: 15px;
          margin-bottom: 20px;
        }
        .results-summary {
          grid-template-columns: repeat(2, 1fr);
          gap: 10px;
          margin-bottom: 20px;
        }
        .summary-card {
          padding: 12px;
        }
        .summary-label {
          font-size: 10px;
        }
        .summary-value {
          font-size: 20px;
        }
        .section-title {
          padding: 12px 15px;
          font-size: 14px;
        }
        .question-review {
          padding: 12px;
          margin-bottom: 12px;
        }
        .review-q-number {
          font-size: 12px;
        }
        .review-q-text {
          font-size: 13px;
          margin-bottom: 12px;
        }
        .answer-display {
          padding: 10px;
        }
        .answer-row {
          font-size: 12px;
          flex-direction: column;
          margin-bottom: 8px;
        }
        .answer-label {
          min-width: auto;
          font-size: 11px;
          margin-bottom: 4px;
        }
        .feedback {
          padding: 8px;
          font-size: 12px;
        }
        .modal {
          padding: 20px 0;
        }
        .modal-content {
          max-width: 95%;
          width: 95%;
          padding: 20px;
          margin: 20px auto;
          max-height: 90vh;
          overflow-y: auto;
        }
        .modal-content h2 {
          font-size: 14px;
          margin-bottom: 15px;
        }
        .calculator {
          padding: 12px;
        }
        .calc-display {
          font-size: 18px;
          padding: 10px;
          min-height: 36px;
          margin-bottom: 8px;
        }
        .calc-buttons {
          gap: 6px;
        }
        .calc-btn {
          padding: 10px 6px;
          font-size: 13px;
          min-height: 40px;
        }
      }

      @media (max-width: 479px) {
        body {
          font-size: 13px;
          padding: 0;
          background: linear-gradient(135deg, #16a085 0%, #117a65 100%);
        }
        .container {
          max-width: 100%;
          border-radius: 0;
          box-shadow: none;
        }
        .header {
          padding: 8px 10px;
          gap: 8px;
          border-bottom: 3px solid #117a65;
          flex-wrap: wrap;
        }
        .header h1 {
          font-size: 13px;
          margin: 0;
          line-height: 1.2;
          flex: 1;
        }
        .menu-toggle {
          display: flex;
          align-items: center;
          justify-content: center;
          margin: 0;
          padding: 6px 8px;
        }
        .header-tools {
          width: 100%;
          gap: 6px;
          display: none;
          flex-direction: column;
        }
        .header-tools.active {
          display: flex;
        }
        .tool-btn {
          flex: 1;
          padding: 8px 10px;
          font-size: 10px;
          min-height: 36px;
          border-radius: 4px;
          display: flex;
          align-items: center;
          justify-content: center;
          text-overflow: ellipsis;
        }
        .top-bar {
          flex-direction: column;
          padding: 8px 10px;
          gap: 6px;
          align-items: stretch;
        }
        .top-bar > div:first-child {
          display: flex;
          gap: 8px;
          align-items: center;
        }
        .stats-bar {
          flex-direction: column;
          gap: 6px;
          font-size: 10px;
          width: 100%;
        }
        .stat-item {
          background: white;
          padding: 5px 8px;
          border-radius: 4px;
          font-size: 10px;
          gap: 6px;
          justify-content: space-between;
        }
        .timer-display {
          font-size: 14px;
          min-width: 60px;
          font-weight: bold;
        }
        .content-area {
          padding: 10px;
          min-height: auto;
        }
        .question-section {
          animation: fadeIn 0.3s ease;
        }
        .question-header {
          flex-direction: column;
          gap: 8px;
          margin-bottom: 12px;
        }
        .question-course {
          font-size: 11px;
          padding: 3px 8px;
        }
        .question-number {
          font-size: 12px;
          margin-bottom: 8px;
        }
        .flag-btn {
          width: 100%;
          padding: 8px 10px;
          font-size: 11px;
          min-height: 40px;
          border-radius: 5px;
        }
        .question-text {
          font-size: 13px;
          margin-bottom: 12px;
          line-height: 1.5;
        }
        .options {
          gap: 8px;
        }
        .option {
          padding: 10px 10px;
          font-size: 12px;
          min-height: 44px;
          border-radius: 5px;
          align-items: center;
        }
        .option input[type="radio"] {
          margin-right: 8px;
          width: 16px;
          height: 16px;
          cursor: pointer;
        }
        .option span {
          flex: 1;
        }
        textarea {
          width: 100%;
          height: 100px;
          font-size: 12px;
          padding: 8px;
          border-radius: 4px;
          resize: vertical;
        }
        .bottom-controls {
          display: flex;
          flex-direction: column;
          gap: 8px;
          margin-top: 12px;
        }
        .btn {
          width: 100%;
          padding: 10px 12px;
          font-size: 11px;
          min-height: 44px;
          border-radius: 5px;
          display: flex;
          align-items: center;
          justify-content: center;
        }
        .results-header {
          padding: 12px;
          margin-bottom: 15px;
          border-left-width: 3px;
        }
        .results-header h2 {
          font-size: 13px;
          margin-bottom: 6px;
        }
        .results-header p {
          font-size: 11px;
        }
        .results-summary {
          grid-template-columns: 1fr;
          gap: 8px;
        }
        .summary-card {
          padding: 12px;
        }
        .summary-label {
          font-size: 10px;
        }
        .summary-value {
          font-size: 18px;
        }
        .section-title {
          padding: 10px 12px;
          font-size: 13px;
          margin-top: 15px;
          margin-bottom: 10px;
        }
        .question-review {
          padding: 10px;
          margin-bottom: 10px;
        }
        .review-question-header {
          flex-direction: column;
          gap: 6px;
          margin-bottom: 10px;
        }
        .review-q-number {
          font-size: 11px;
        }
        .review-q-course {
          font-size: 10px;
        }
        .review-status {
          font-size: 10px;
          padding: 3px 8px;
        }
        .review-q-text {
          font-size: 12px;
          margin-bottom: 10px;
          line-height: 1.5;
        }
        .answer-display {
          padding: 8px;
        }
        .answer-row {
          font-size: 11px;
          flex-direction: column;
          margin-bottom: 8px;
        }
        .answer-label {
          font-size: 10px;
          margin-bottom: 4px;
        }
        .answer-value {
          font-size: 11px;
        }
        .feedback {
          padding: 8px;
          font-size: 11px;
          margin-top: 8px;
        }
        .modal {
          padding: 10px 0;
          align-items: flex-end;
        }
        .modal-content {
          max-width: 100%;
          width: 100%;
          padding: 15px;
          margin: 0;
          border-radius: 15px 15px 0 0;
          max-height: 85vh;
          overflow-y: auto;
          box-shadow: 0 -5px 25px rgba(0, 0, 0, 0.3);
        }
        .modal-content h2 {
          font-size: 13px;
          margin-bottom: 12px;
        }
        .calculator {
          padding: 10px;
          background: #f9f9f9;
          border-radius: 5px;
        }
        .calc-display {
          font-size: 16px;
          padding: 8px;
          min-height: 32px;
          margin-bottom: 8px;
          border-radius: 4px;
        }
        .calc-buttons {
          grid-template-columns: repeat(4, 1fr);
          gap: 5px;
        }
        .calc-btn {
          padding: 8px 4px;
          font-size: 12px;
          min-height: 36px;
          border-radius: 3px;
        }
        .modal > .modal-content > div {
          display: grid;
          gap: 12px;
        }
        .modal > .modal-content button {
          margin-top: 12px;
        }
      }

      @media (max-width: 319px) {
        .header h1 {
          font-size: 11px;
        }
        .timer-display {
          font-size: 12px;
        }
        .question-text {
          font-size: 12px;
        }
        .option {
          font-size: 11px;
          padding: 8px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>JUPEB GOVERNMENT PRACTICE EXAM</h1>
        <button
          class="menu-toggle"
          id="menuToggle"
          onclick="toggleHeaderMenu()"
          aria-label="Toggle menu"
        >
          ‚ò∞
        </button>
        <div class="header-tools" id="headerTools">
          <button class="tool-btn" onclick="openCalculator()">
            üßÆ Calculator
          </button>
          <button class="tool-btn" onclick="openSettings()">‚öôÔ∏è Settings</button>
        </div>
      </div>

      <div class="top-bar">
        <div>
          <span style="font-weight: 600">‚è±Ô∏è Time:</span>
          <span class="timer-display" id="timerDisplay">120:00</span>
        </div>
        <div class="stats-bar">
          <div class="stat-item">
            <span class="stat-label">Answered:</span>
            <span class="stat-value" id="answeredCount">0</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Unanswered:</span>
            <span class="stat-value" id="unansweredCount">46</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Flagged:</span>
            <span class="stat-value" id="flaggedCount">0</span>
          </div>
          <div class="auto-save-indicator" id="autoSaveIndicator">
            ‚úì Auto-saved
          </div>
        </div>
      </div>

      <div class="content-area">
        <div class="question-view active" id="questionView">
          <div class="question-section" id="questionContent"></div>
          <div class="bottom-controls">
            <button
              class="btn btn-secondary"
              id="prevBtn"
              onclick="previousQuestion()"
            >
              ‚Üê Previous
            </button>
            <button
              class="btn btn-primary"
              id="nextBtn"
              onclick="nextQuestion()"
            >
              Next ‚Üí
            </button>
            <button
              class="btn btn-primary"
              id="submitBtn"
              onclick="submitExam()"
              style="
                background: linear-gradient(135deg, #27ae60 0%, #229954 100%);
                display: none;
              "
            >
              ‚úì Submit Exam
            </button>
          </div>
        </div>

        <div class="results-view" id="resultsView">
          <div class="results-header">
            <h2>üìä Exam Results & Answer Key</h2>
            <p>
              Review your complete exam submission with correct answers and
              explanations
            </p>
          </div>

          <div class="results-summary" id="resultsSummary"></div>

          <div class="answer-review" id="answerReview"></div>

          <div class="bottom-controls">
            <button class="btn btn-secondary" onclick="window.print()">
              üñ®Ô∏è Print Results
            </button>
            <button class="btn btn-secondary" onclick="downloadResults()">
              üíæ Download PDF
            </button>
            <button class="btn btn-primary" onclick="location.reload()">
              Start New Exam
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="modal" id="settingsModal">
      <div class="modal-content">
        <h2>‚öôÔ∏è Settings</h2>
        <div style="display: grid; gap: 15px">
          <div>
            <label style="font-weight: 600; display: block; margin-bottom: 10px"
              >Font Size</label
            >
            <div style="display: flex; gap: 10px">
              <button
                class="btn btn-secondary"
                onclick="setFontSize('small')"
                style="flex: 1"
              >
                Small
              </button>
              <button
                class="btn btn-secondary"
                onclick="setFontSize('normal')"
                style="flex: 1"
              >
                Normal
              </button>
              <button
                class="btn btn-secondary"
                onclick="setFontSize('large')"
                style="flex: 1"
              >
                Large
              </button>
            </div>
          </div>
          <div>
            <label style="font-weight: 600; display: block; margin-bottom: 10px"
              >Theme</label
            >
            <div style="display: flex; gap: 10px">
              <button
                class="btn btn-secondary"
                onclick="setTheme('light')"
                style="flex: 1"
              >
                Light
              </button>
              <button
                class="btn btn-secondary"
                onclick="setTheme('dark')"
                style="flex: 1"
              >
                Dark
              </button>
            </div>
          </div>
        </div>
        <button
          class="btn btn-primary"
          onclick="closeSettings()"
          style="width: 100%; margin-top: 20px"
        >
          Close
        </button>
      </div>
    </div>

    <div class="modal" id="calculatorModal">
      <div class="modal-content">
        <h2>üßÆ Scientific Calculator</h2>
        <div class="calculator">
          <div class="calc-display" id="calcDisplay">0</div>
          <div class="calc-buttons">
            <button
              class="calc-btn"
              onclick="calcClear()"
              style="grid-column: span 2; background: #e74c3c; color: white"
            >
              Clear
            </button>
            <button class="calc-btn operator" onclick="calcAppend('/')">
              /
            </button>
            <button class="calc-btn operator" onclick="calcAppend('*')">
              √ó
            </button>

            <button class="calc-btn" onclick="calcAppend('7')">7</button>
            <button class="calc-btn" onclick="calcAppend('8')">8</button>
            <button class="calc-btn" onclick="calcAppend('9')">9</button>
            <button class="calc-btn operator" onclick="calcAppend('-')">
              ‚àí
            </button>

            <button class="calc-btn" onclick="calcAppend('4')">4</button>
            <button class="calc-btn" onclick="calcAppend('5')">5</button>
            <button class="calc-btn" onclick="calcAppend('6')">6</button>
            <button class="calc-btn operator" onclick="calcAppend('+')">
              +
            </button>

            <button class="calc-btn" onclick="calcAppend('1')">1</button>
            <button class="calc-btn" onclick="calcAppend('2')">2</button>
            <button class="calc-btn" onclick="calcAppend('3')">3</button>
            <button class="calc-btn operator" onclick="calcAppend('.')">
              .
            </button>

            <button
              class="calc-btn"
              onclick="calcAppend('0')"
              style="grid-column: span 2"
            >
              0
            </button>
            <button
              class="calc-btn operator"
              style="grid-column: span 2"
              onclick="calcEquals()"
            >
              =
            </button>
          </div>
        </div>
        <button
          class="btn btn-primary"
          onclick="closeCalculator()"
          style="width: 100%"
        >
          Close
        </button>
      </div>
    </div>

    <script>
      const questionsData = [
        // GOV 001 MCQs (1-20)
        {
          id: 1,
          course: "GOV 001",
          text: "The primary function of a constitution in a democratic state is to:",
          section: "A",
          options: [
            {
              text: "Establish the legal framework and define the structure of government",
              value: "A",
            },
            { text: "Ensure all citizens have equal wealth", value: "B" },
            { text: "Prevent the existence of political parties", value: "C" },
            {
              text: "Guarantee that the ruling party never loses power",
              value: "D",
            },
          ],
          correct: "A",
        },
        {
          id: 2,
          course: "GOV 001",
          text: "Separation of powers refers to the division of government into three main branches. Which of the following is NOT one of these branches?",
          section: "A",
          options: [
            { text: "Executive", value: "A" },
            { text: "Judiciary", value: "B" },
            { text: "Electoral Commission", value: "C" },
            { text: "Legislature", value: "D" },
          ],
          correct: "C",
        },
        {
          id: 3,
          course: "GOV 001",
          text: "In a parliamentary system of government, the head of government is typically:",
          section: "A",
          options: [
            { text: "The President", value: "A" },
            { text: "The Prime Minister", value: "B" },
            { text: "The Chief Justice", value: "C" },
            { text: "The Military Commander", value: "D" },
          ],
          correct: "B",
        },
        {
          id: 4,
          course: "GOV 001",
          text: "The principle of checks and balances ensures that:",
          section: "A",
          options: [
            {
              text: "No single branch of government becomes too powerful",
              value: "A",
            },
            {
              text: "All citizens have equal political representation",
              value: "B",
            },
            { text: "Elections are held every five years", value: "C" },
            { text: "The judiciary makes all major decisions", value: "D" },
          ],
          correct: "A",
        },
        {
          id: 5,
          course: "GOV 001",
          text: "Which of the following is a characteristic of an authoritarian government?",
          section: "A",
          options: [
            { text: "Free and fair elections", value: "A" },
            { text: "Protection of individual rights", value: "B" },
            {
              text: "Concentration of power in one person or group",
              value: "C",
            },
            { text: "Regular rotation of leadership", value: "D" },
          ],
          correct: "C",
        },
        {
          id: 6,
          course: "GOV 001",
          text: "The sovereignty of a state means:",
          section: "A",
          options: [
            { text: "It has a large military force", value: "A" },
            {
              text: "It has absolute and independent authority over its territory and people",
              value: "B",
            },
            { text: "It is a member of the United Nations", value: "C" },
            { text: "It has significant economic resources", value: "D" },
          ],
          correct: "B",
        },
        {
          id: 7,
          course: "GOV 001",
          text: "Democracy is best defined as:",
          section: "A",
          options: [
            { text: "Rule by the wealthy", value: "A" },
            { text: "Rule by the military", value: "B" },
            {
              text: "Government by the people, either directly or through representatives",
              value: "C",
            },
            { text: "Rule by religious leaders", value: "D" },
          ],
          correct: "C",
        },
        {
          id: 8,
          course: "GOV 001",
          text: "The legislative branch of government is primarily responsible for:",
          section: "A",
          options: [
            { text: "Interpreting laws", value: "A" },
            { text: "Making and passing laws", value: "B" },
            { text: "Enforcing laws", value: "C" },
            { text: "Appointing judges", value: "D" },
          ],
          correct: "B",
        },
        {
          id: 9,
          course: "GOV 001",
          text: "A referendum is a process in which:",
          section: "A",
          options: [
            { text: "Politicians make decisions for the people", value: "A" },
            {
              text: "The people vote directly on a specific issue or proposal",
              value: "B",
            },
            { text: "Parliament passes laws without public input", value: "C" },
            { text: "The president makes unilateral decisions", value: "D" },
          ],
          correct: "B",
        },
        {
          id: 10,
          course: "GOV 001",
          text: "The executive branch of government is led by:",
          section: "A",
          options: [
            { text: "The Speaker of Parliament", value: "A" },
            { text: "The Chief Justice", value: "B" },
            { text: "The President or Prime Minister", value: "C" },
            { text: "The Leader of Opposition", value: "D" },
          ],
          correct: "C",
        },
        {
          id: 11,
          course: "GOV 001",
          text: "Political ideology refers to:",
          section: "A",
          options: [
            { text: "The study of political history", value: "A" },
            {
              text: "A comprehensive set of beliefs about politics and governance",
              value: "B",
            },
            { text: "The study of international relations", value: "C" },
            { text: "The laws of a country", value: "D" },
          ],
          correct: "B",
        },
        {
          id: 12,
          course: "GOV 001",
          text: "A federal system of government is characterized by:",
          section: "A",
          options: [
            {
              text: "All power concentrated in the national government",
              value: "A",
            },
            {
              text: "Power shared between a central government and constituent states/provinces",
              value: "B",
            },
            { text: "Complete independence of all regions", value: "C" },
            { text: "No national government", value: "D" },
          ],
          correct: "B",
        },
        {
          id: 13,
          course: "GOV 001",
          text: "The right to vote in democratic elections is known as:",
          section: "A",
          options: [
            { text: "Representation", value: "A" },
            { text: "Citizenship", value: "B" },
            { text: "Suffrage", value: "C" },
            { text: "Constituency", value: "D" },
          ],
          correct: "C",
        },
        {
          id: 14,
          course: "GOV 001",
          text: "Which of the following is an example of direct democracy?",
          section: "A",
          options: [
            { text: "Representative government", value: "A" },
            {
              text: "Citizens voting directly on laws and policies",
              value: "B",
            },
            { text: "Rule by a single leader", value: "C" },
            { text: "Military governance", value: "D" },
          ],
          correct: "B",
        },
        {
          id: 15,
          course: "GOV 001",
          text: "The judiciary's primary role in government is to:",
          section: "A",
          options: [
            { text: "Make laws", value: "A" },
            { text: "Enforce laws", value: "B" },
            { text: "Interpret laws and administer justice", value: "C" },
            { text: "Command the military", value: "D" },
          ],
          correct: "C",
        },
        {
          id: 16,
          course: "GOV 001",
          text: "A political party is best described as:",
          section: "A",
          options: [
            { text: "A government agency", value: "A" },
            {
              text: "An organization of people with shared political goals seeking to gain power",
              value: "B",
            },
            { text: "The military establishment", value: "C" },
            { text: "A religious organization", value: "D" },
          ],
          correct: "B",
        },
        {
          id: 17,
          course: "GOV 001",
          text: "The principle of rule of law means that:",
          section: "A",
          options: [
            { text: "The government is above the law", value: "A" },
            {
              text: "All people, including government officials, are subject to the law",
              value: "B",
            },
            { text: "Laws apply only to ordinary citizens", value: "C" },
            { text: "The president can change laws at will", value: "D" },
          ],
          correct: "B",
        },
        {
          id: 18,
          course: "GOV 001",
          text: "An independent judiciary is important because it:",
          section: "A",
          options: [
            { text: "Makes the other branches of government weak", value: "A" },
            {
              text: "Ensures fair interpretation of laws without political interference",
              value: "B",
            },
            { text: "Has power over the other branches", value: "C" },
            { text: "Can abolish any law it dislikes", value: "D" },
          ],
          correct: "B",
        },
        {
          id: 19,
          course: "GOV 001",
          text: "The term civil society refers to:",
          section: "A",
          options: [
            { text: "The military forces", value: "A" },
            { text: "The government institutions", value: "B" },
            {
              text: "Organizations independent of government that represent public interests",
              value: "C",
            },
            { text: "Political parties in power", value: "D" },
          ],
          correct: "C",
        },
        {
          id: 20,
          course: "GOV 001",
          text: "Which of the following best describes a unitary system of government?",
          section: "A",
          options: [
            {
              text: "Power is shared between central and regional governments",
              value: "A",
            },
            {
              text: "All government power is held by a single central authority",
              value: "B",
            },
            { text: "Each region is completely independent", value: "C" },
            { text: "The military holds all power", value: "D" },
          ],
          correct: "B",
        },
        // GOV 002 MCQs (21-40)
        {
          id: 21,
          course: "GOV 002",
          text: "The primary function of the civil service is to:",
          section: "A",
          options: [
            { text: "Make political decisions", value: "A" },
            {
              text: "Implement and administer government policies and programs",
              value: "B",
            },
            { text: "Command the military", value: "C" },
            { text: "Interpret laws", value: "D" },
          ],
          correct: "B",
        },
        {
          id: 22,
          course: "GOV 002",
          text: "Which of the following is a key principle of public administration?",
          section: "A",
          options: [
            { text: "Nepotism and favoritism", value: "A" },
            {
              text: "Accountability, transparency, and efficiency",
              value: "B",
            },
            { text: "Serving only the wealthy", value: "C" },
            { text: "Avoiding democratic principles", value: "D" },
          ],
          correct: "B",
        },
        {
          id: 23,
          course: "GOV 002",
          text: "A cabinet in government typically consists of:",
          section: "A",
          options: [
            { text: "Military generals", value: "A" },
            { text: "Religious leaders", value: "B" },
            {
              text: "Senior ministers responsible for different government departments",
              value: "C",
            },
            { text: "Opposition party members", value: "D" },
          ],
          correct: "C",
        },
        {
          id: 24,
          course: "GOV 002",
          text: "The principle of meritocracy in civil service means that:",
          section: "A",
          options: [
            { text: "Only wealthy people can work in government", value: "A" },
            {
              text: "Posts are given based on personal connections",
              value: "B",
            },
            {
              text: "Appointments and promotions are based on ability and qualifications",
              value: "C",
            },
            { text: "All positions are equally paid", value: "D" },
          ],
          correct: "C",
        },
        {
          id: 25,
          course: "GOV 002",
          text: "Which institution is typically responsible for managing a country's foreign relations?",
          section: "A",
          options: [
            { text: "The Ministry of Defense", value: "A" },
            { text: "The Ministry of Foreign Affairs", value: "B" },
            { text: "The Treasury", value: "C" },
            { text: "The Judiciary", value: "D" },
          ],
          correct: "B",
        },
        {
          id: 26,
          course: "GOV 002",
          text: "Bureaucracy in government refers to:",
          section: "A",
          options: [
            { text: "Corruption in government", value: "A" },
            {
              text: "The system of administration by government officials and departments",
              value: "B",
            },
            { text: "The military structure", value: "C" },
            { text: "Political party operations", value: "D" },
          ],
          correct: "B",
        },
        {
          id: 27,
          course: "GOV 002",
          text: "Which of the following is a function of local government?",
          section: "A",
          options: [
            { text: "Declaring war", value: "A" },
            { text: "Making national foreign policy", value: "B" },
            {
              text: "Providing local services like waste management and local roads",
              value: "C",
            },
            { text: "Controlling the military", value: "D" },
          ],
          correct: "C",
        },
        {
          id: 28,
          course: "GOV 002",
          text: "The independence of the central bank is important to ensure:",
          section: "A",
          options: [
            { text: "Lower taxes for the wealthy", value: "A" },
            { text: "Political control over monetary policy", value: "B" },
            {
              text: "Sound monetary policy and inflation control without political interference",
              value: "C",
            },
            { text: "Unlimited government spending", value: "D" },
          ],
          correct: "C",
        },
        {
          id: 29,
          course: "GOV 002",
          text: "Which institution is responsible for prosecuting criminal cases on behalf of the state?",
          section: "A",
          options: [
            { text: "The Defense Attorney's Office", value: "A" },
            { text: "The Director of Public Prosecutions", value: "B" },
            { text: "The Parliament", value: "C" },
            { text: "The Military Court", value: "D" },
          ],
          correct: "B",
        },
        {
          id: 30,
          course: "GOV 002",
          text: "Intergovernmental relations refer to:",
          section: "A",
          options: [
            { text: "Relations between citizens and government", value: "A" },
            {
              text: "Relations between different levels of government",
              value: "B",
            },
            { text: "Diplomatic relations between countries", value: "C" },
            { text: "Relations between government and businesses", value: "D" },
          ],
          correct: "B",
        },
        {
          id: 31,
          course: "GOV 002",
          text: "The ombudsman office is primarily established to:",
          section: "A",
          options: [
            { text: "Make government laws", value: "A" },
            {
              text: "Investigate complaints against government institutions and officials",
              value: "B",
            },
            { text: "Command the military", value: "C" },
            { text: "Manage government finances", value: "D" },
          ],
          correct: "B",
        },
        {
          id: 32,
          course: "GOV 002",
          text: "Which of the following is a key characteristic of good governance?",
          section: "A",
          options: [
            { text: "Secrecy in all government operations", value: "A" },
            {
              text: "Accountability, transparency, and participation",
              value: "B",
            },
            { text: "Unlimited executive power", value: "C" },
            {
              text: "Exclusion of the public from decision-making",
              value: "D",
            },
          ],
          correct: "B",
        },
        {
          id: 33,
          course: "GOV 002",
          text: "The electoral commission is responsible for:",
          section: "A",
          options: [
            { text: "Making laws", value: "A" },
            { text: "Enforcing laws", value: "B" },
            {
              text: "Organizing and managing elections and ensuring their integrity",
              value: "C",
            },
            { text: "Appointing judges", value: "D" },
          ],
          correct: "C",
        },
        {
          id: 34,
          course: "GOV 002",
          text: "Public policy refers to:",
          section: "A",
          options: [
            { text: "Policies of private companies", value: "A" },
            {
              text: "Decisions and actions taken by government to address public issues",
              value: "B",
            },
            { text: "The constitution alone", value: "C" },
            { text: "The military strategy", value: "D" },
          ],
          correct: "B",
        },
        {
          id: 35,
          course: "GOV 002",
          text: "Which of the following is a function of the legislature in making laws?",
          section: "A",
          options: [
            { text: "Interpreting laws", value: "A" },
            {
              text: "Proposing, debating, amending, and passing legislation",
              value: "B",
            },
            { text: "Executing laws", value: "C" },
            { text: "Appointing all government officials", value: "D" },
          ],
          correct: "B",
        },
        {
          id: 36,
          course: "GOV 002",
          text: "The principle of devolution involves:",
          section: "A",
          options: [
            { text: "Centralization of all power", value: "A" },
            {
              text: "Transfer of power from central to local government",
              value: "B",
            },
            { text: "Abolition of local government", value: "C" },
            { text: "Military control of government", value: "D" },
          ],
          correct: "B",
        },
        {
          id: 37,
          course: "GOV 002",
          text: "Which international organization is responsible for maintaining global peace and security?",
          section: "A",
          options: [
            { text: "The World Bank", value: "A" },
            { text: "The International Monetary Fund", value: "B" },
            { text: "The United Nations", value: "C" },
            { text: "The World Health Organization", value: "D" },
          ],
          correct: "C",
        },
        {
          id: 38,
          course: "GOV 002",
          text: "The separation between political and administrative functions in government means:",
          section: "A",
          options: [
            {
              text: "Politicians execute all administrative duties",
              value: "A",
            },
            {
              text: "Civil servants should be impartial and follow the direction of elected politicians",
              value: "B",
            },
            { text: "Administrators make political decisions", value: "C" },
            {
              text: "There should be no interaction between the two",
              value: "D",
            },
          ],
          correct: "B",
        },
        {
          id: 39,
          course: "GOV 002",
          text: "Which of the following is an example of a check on executive power?",
          section: "A",
          options: [
            { text: "The executive controls the judiciary", value: "A" },
            {
              text: "The legislature can impeach and remove the president",
              value: "B",
            },
            { text: "The executive appoints all lawmakers", value: "C" },
            { text: "The executive is above the law", value: "D" },
          ],
          correct: "B",
        },
        {
          id: 40,
          course: "GOV 002",
          text: "Democratic accountability requires that government officials be:",
          section: "A",
          options: [
            { text: "Unelected and unremovable", value: "A" },
            {
              text: "Responsible to the public and answerable for their actions",
              value: "B",
            },
            { text: "Free from any oversight", value: "C" },
            { text: "Appointed by the military", value: "D" },
          ],
          correct: "B",
        },
        // Theory Questions (41-46)
        {
          id: 41,
          course: "GOV 001",
          text: "(a) Explain the principle of separation of powers and name the three main branches of government. (4 marks)\n\n(b) Describe how checks and balances work between these three branches. Provide two examples. (4 marks)\n\n(c) Discuss the advantages of a constitutional democracy over an authoritarian system. (2 marks)",
          section: "B",
          marks: 10,
        },
        {
          id: 42,
          course: "GOV 001",
          text: "(a) Define what is meant by political representation and explain two different systems of representation. (4 marks)\n\n(b) What are the key rights and responsibilities of citizens in a democratic state? (3 marks)\n\n(c) Discuss the challenges facing modern democratic systems. (3 marks)",
          section: "B",
          marks: 10,
        },
        {
          id: 43,
          course: "GOV 001",
          text: "(a) Compare and contrast unitary and federal systems of government. (5 marks)\n\n(b) Explain how federalism protects against the concentration of power. (3 marks)\n\n(c) What are the advantages of a federal system for a diverse country? (2 marks)",
          section: "B",
          marks: 10,
        },
        {
          id: 44,
          course: "GOV 002",
          text: "(a) Explain the role and functions of the civil service in modern government. (4 marks)\n\n(b) Discuss the principles of a professional civil service. (3 marks)\n\n(c) What are the challenges facing civil services in developing countries? (3 marks)",
          section: "B",
          marks: 10,
        },
        {
          id: 45,
          course: "GOV 002",
          text: "(a) Explain the role of the United Nations in international relations and peace and security. (4 marks)\n\n(b) Define bilateral relations and describe how countries use diplomacy. (3 marks)\n\n(c) Discuss how international law influences state behavior. (3 marks)",
          section: "B",
          marks: 10,
        },
        {
          id: 46,
          course: "GOV 002",
          text: "(a) Explain the concept of good governance and identify five key components. (5 marks)\n\n(b) Describe the mechanisms for combating corruption in government. (3 marks)\n\n(c) What is the role of the ombudsman in ensuring accountability? (2 marks)",
          section: "B",
          marks: 10,
        },
      ];

      let currentQ = 0;
      let answers = {};
      let flagged = {};
      let examSubmitted = false;
      let calcExpression = "";
      let startTime = Date.now();

      window.addEventListener("load", () => {
        displayQuestion();
        startTimer();
      });

      function displayQuestion() {
        updateStats();
        const q = questionsData[currentQ];
        if (!q) return;

        let html = `<div class="question-section">
                <div class="question-header">
                    <div>
                        <div class="question-course">${q.course}</div>
                        <div class="question-number">Question ${currentQ + 1} of ${questionsData.length}</div>
                    </div>
                    <button class="flag-btn ${flagged[currentQ] ? "flagged" : ""}" onclick="toggleFlag(${currentQ})">
                        ${flagged[currentQ] ? "üö© Flagged" : "üìå Flag"}
                    </button>
                </div>
                <div class="question-text">${q.text}</div>`;

        if (q.options) {
          html += '<div class="options">';
          q.options.forEach((opt) => {
            const selected = answers[currentQ] === opt.value ? "selected" : "";
            html += `<label class="option ${selected}">
                        <input type="radio" name="q${currentQ}" value="${opt.value}" onchange="selectAnswer(${currentQ}, '${opt.value}')">
                        <span>${opt.value})</span> ${opt.text}
                    </label>`;
          });
          html += "</div>";
        } else {
          html += `<textarea id="theory${currentQ}" placeholder="Type your answer..." onchange="saveTheoryAnswer(${currentQ})">${answers[currentQ] || ""}</textarea>
                <div style="margin-top: 10px; font-size: 12px; color: #666; font-weight: 600;">Total Marks: ${q.marks}</div>`;
        }

        html += "</div>";
        document.getElementById("questionContent").innerHTML = html;
        updateButtons();
      }

      function selectAnswer(qIdx, value) {
        answers[qIdx] = value;
        updateStats();
        autoSave();
      }

      function saveTheoryAnswer(qIdx) {
        answers[qIdx] = document.getElementById(`theory${qIdx}`).value;
        updateStats();
        autoSave();
      }

      function toggleFlag(qIdx) {
        flagged[qIdx] = !flagged[qIdx];
        updateStats();
      }

      function nextQuestion() {
        if (currentQ < questionsData.length - 1) {
          currentQ++;
          displayQuestion();
        }
      }

      function previousQuestion() {
        if (currentQ > 0) {
          currentQ--;
          displayQuestion();
        }
      }

      function updateStats() {
        const answered = Object.keys(answers).filter((k) => answers[k]).length;
        const total = questionsData.length;
        const flaggedCount = Object.values(flagged).filter((f) => f).length;

        document.getElementById("answeredCount").textContent = answered;
        document.getElementById("unansweredCount").textContent =
          total - answered;
        document.getElementById("flaggedCount").textContent = flaggedCount;
      }

      function updateButtons() {
        document.getElementById("prevBtn").disabled = currentQ === 0;
        document.getElementById("nextBtn").style.display =
          currentQ === questionsData.length - 1 ? "none" : "block";
        document.getElementById("submitBtn").style.display =
          currentQ === questionsData.length - 1 ? "block" : "none";
      }

      function autoSave() {
        const indicator = document.getElementById("autoSaveIndicator");
        indicator.style.display = "inline-block";
        setTimeout(() => (indicator.style.display = "none"), 2000);
      }

      function startTimer() {
        setInterval(() => {
          let elapsed = Math.floor((Date.now() - startTime) / 1000);
          let remaining = 7200 - elapsed;
          if (remaining < 0) remaining = 0;

          let mins = Math.floor(remaining / 60);
          let secs = remaining % 60;
          document.getElementById("timerDisplay").textContent =
            `${mins.toString().padStart(2, "0")}:${secs.toString().padStart(2, "0")}`;

          if (remaining < 300) {
            document.getElementById("timerDisplay").classList.add("warning");
          }
        }, 1000);
      }

      function submitExam() {
        if (confirm("Submit exam? You cannot make changes after submission.")) {
          examSubmitted = true;
          displayResults();
        }
      }

      function displayResults() {
        document.getElementById("questionView").classList.remove("active");
        document.getElementById("resultsView").classList.add("active");

        const totalQuestions = questionsData.length;
        const mcqQuestions = questionsData.filter((q) => q.section === "A");
        let correctCount = 0;
        let answeredCount = 0;

        mcqQuestions.forEach((q, idx) => {
          if (answers[idx]) {
            answeredCount++;
            if (answers[idx] === q.correct) correctCount++;
          }
        });

        const score = ((correctCount / mcqQuestions.length) * 100).toFixed(1);

        let summary = `
                <div class="summary-card correct">
                    <div class="summary-label">Correct Answers</div>
                    <div class="summary-value">${correctCount}/${mcqQuestions.length}</div>
                </div>
                <div class="summary-card incorrect">
                    <div class="summary-label">Incorrect Answers</div>
                    <div class="summary-value">${mcqQuestions.length - correctCount}</div>
                </div>
                <div class="summary-card">
                    <div class="summary-label">Section A Score</div>
                    <div class="summary-value">${score}%</div>
                </div>
                <div class="summary-card">
                    <div class="summary-label">Questions Answered</div>
                    <div class="summary-value">${answeredCount}/${mcqQuestions.length}</div>
                </div>
            `;

        document.getElementById("resultsSummary").innerHTML = summary;

        let review = `<div class="section-title">üìù Section A: Multiple Choice Questions</div>`;

        questionsData.forEach((q, idx) => {
          if (q.section === "A") {
            const userAnswer = answers[idx];
            const isCorrect = userAnswer === q.correct;
            const status = userAnswer
              ? isCorrect
                ? "correct"
                : "incorrect"
              : "unanswered";
            const statusLabel = userAnswer
              ? isCorrect
                ? "‚úì Correct"
                : "‚úó Incorrect"
              : "? Unanswered";

            review += `<div class="question-review">
                        <div class="review-question-header">
                            <div>
                                <div class="review-q-number">Question ${idx + 1}</div>
                                <span class="review-q-course">${q.course}</span>
                                <span class="review-status ${status}">${statusLabel}</span>
                            </div>
                        </div>
                        <div class="review-q-text">${q.text}</div>
                        <div class="answer-display">
                            <div class="answer-row">
                                <span class="answer-label">Your Answer:</span>
                                <span class="answer-value">${userAnswer || "Not answered"}</span>
                            </div>
                            <div class="answer-row">
                                <span class="answer-label">Correct Answer:</span>
                                <span class="answer-value">${q.correct}</span>
                            </div>
                            ${
                              userAnswer && userAnswer !== q.correct
                                ? `
                            <div class="answer-row">
                                <span class="answer-label">Explanation:</span>
                                <span class="answer-value" style="color: #e74c3c;">You selected ${userAnswer}. The correct answer is ${q.correct}.</span>
                            </div>
                            `
                                : ""
                            }
                        </div>
                        ${isCorrect ? `<div class="feedback correct">‚úì Excellent! Your answer is correct.</div>` : userAnswer ? `<div class="feedback incorrect">‚úó Incorrect. Please review this concept.</div>` : `<div class="feedback unanswered">‚ö† This question was not answered.</div>`}
                    </div>`;
          }
        });

        review += `<div class="section-title" style="margin-top: 30px;">üìù Section B: Theory Questions</div>`;

        questionsData.forEach((q, idx) => {
          if (q.section === "B") {
            const userAnswer = answers[idx];
            const status = userAnswer ? "answered" : "unanswered";
            const statusLabel = userAnswer ? "‚úì Answered" : "? Unanswered";

            review += `<div class="question-review">
                        <div class="review-question-header">
                            <div>
                                <div class="review-q-number">Question ${idx + 1}</div>
                                <span class="review-q-course">${q.course}</span>
                                <span class="review-status ${status}">${statusLabel}</span>
                            </div>
                        </div>
                        <div class="review-q-text">${q.text}</div>
                        <div class="answer-display">
                            <div class="answer-row">
                                <span class="answer-label">Total Marks:</span>
                                <span class="answer-value">${q.marks}</span>
                            </div>
                            <div class="answer-row" style="flex-direction: column; align-items: flex-start;">
                                <span class="answer-label" style="margin-bottom: 8px;">Your Answer:</span>
                                <div style="background: #f0f0f0; padding: 10px; border-radius: 4px; width: 100%; white-space: pre-wrap; font-family: monospace; font-size: 12px;">
                                    ${userAnswer || "<em>No answer provided</em>"}
                                </div>
                            </div>
                        </div>
                        ${userAnswer ? `<div class="feedback correct">‚úì Your answer has been recorded. This will be evaluated by the examiner.</div>` : `<div class="feedback unanswered">‚ö† This question was not answered.</div>`}
                    </div>`;
          }
        });

        document.getElementById("answerReview").innerHTML = review;
      }

      function downloadResults() {
        alert("PDF download feature coming soon!");
      }

      function toggleHeaderMenu() {
        const headerTools = document.getElementById("headerTools");
        headerTools.classList.toggle("active");
      }

      function openSettings() {
        document.getElementById("headerTools").classList.remove("active");
        document.getElementById("settingsModal").classList.add("active");
      }

      function closeSettings() {
        document.getElementById("settingsModal").classList.remove("active");
      }

      function setFontSize(size) {
        const sizes = { small: "12px", normal: "16px", large: "18px" };
        document.documentElement.style.fontSize = sizes[size];
      }

      function setTheme(theme) {
        document.body.classList.toggle("dark-mode", theme === "dark");
      }

      function openCalculator() {
        document.getElementById("headerTools").classList.remove("active");
        document.getElementById("calculatorModal").classList.add("active");
      }

      function closeCalculator() {
        document.getElementById("calculatorModal").classList.remove("active");
      }

      function calcAppend(val) {
        calcExpression += val;
        document.getElementById("calcDisplay").textContent =
          calcExpression || "0";
      }

      function calcClear() {
        calcExpression = "";
        document.getElementById("calcDisplay").textContent = "0";
      }

      function calcEquals() {
        try {
          calcExpression = String(eval(calcExpression));
          document.getElementById("calcDisplay").textContent = calcExpression;
        } catch (e) {
          document.getElementById("calcDisplay").textContent = "Error";
        }
      }

      // Mobile touch optimization
      const isMobile = window.matchMedia("(max-width: 479px)").matches;

      document.addEventListener("DOMContentLoaded", () => {
        const buttons = document.querySelectorAll(
          ".btn, .tool-btn, .option, .flag-btn",
        );
        buttons.forEach((btn) => {
          btn.addEventListener("touchstart", function () {
            this.style.opacity = "0.8";
          });
          btn.addEventListener("touchend", function () {
            this.style.opacity = "1";
          });
        });
      });

      const viewportMeta = document.querySelector('meta[name="viewport"]');
      if (viewportMeta) {
        document.addEventListener("focusin", (e) => {
          if (e.target.tagName === "INPUT" || e.target.tagName === "TEXTAREA") {
            viewportMeta.setAttribute(
              "content",
              "width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no",
            );
          }
        });
        document.addEventListener("focusout", () => {
          viewportMeta.setAttribute(
            "content",
            "width=device-width, initial-scale=1.0",
          );
        });
      }

      document.addEventListener("DOMContentLoaded", () => {
        const textareas = document.querySelectorAll("textarea");
        textareas.forEach((textarea) => {
          textarea.addEventListener("focus", function () {
            setTimeout(() => {
              this.scrollIntoView({ behavior: "smooth", block: "center" });
            }, 300);
          });
        });
      });

      let touchStartX = 0;
      let touchEndX = 0;

      function handleSwipe() {
        if (touchEndX < touchStartX - 50) {
          if (currentQ < questionsData.length - 1) {
            nextQuestion();
          }
        } else if (touchEndX > touchStartX + 50) {
          if (currentQ > 0) {
            previousQuestion();
          }
        }
      }

      document.addEventListener("touchstart", (e) => {
        touchStartX = e.changedTouches[0].screenX;
      });

      document.addEventListener("touchend", (e) => {
        touchEndX = e.changedTouches[0].screenX;
        handleSwipe();
      });

      document.addEventListener("keydown", (e) => {
        if (examSubmitted) return;

        if (e.key === "ArrowRight" && currentQ < questionsData.length - 1) {
          nextQuestion();
        } else if (e.key === "ArrowLeft" && currentQ > 0) {
          previousQuestion();
        } else if ((e.altKey || e.metaKey) && e.key === "f") {
          e.preventDefault();
          toggleFlag(currentQ);
        }
      });

      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape") {
          document.getElementById("settingsModal").classList.remove("active");
          document.getElementById("calculatorModal").classList.remove("active");
        }
      });

      window.addEventListener("orientationchange", () => {
        displayQuestion();
      });
    </script>
  </body>
</html>
